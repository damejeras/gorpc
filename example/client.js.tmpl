// Code generated by gorpc; DO NOT EDIT.

'use strict';

{{ range $service := .Services -}}
class {{ $service.Name }} {
    {{ range $method := $service.Methods -}}
    async {{ camelize_down $method.Name }}({{ camelize_down $method.InputObject.TypeName }}) {
        const headers = {
			'Accept':		'application/json',
			'Accept-Encoding':	'gzip',
			'Content-Type':		'application/json',
        }
        {{ camelize_down $method.InputObject.TypeName }} = {{ camelize_down $method.InputObject.TypeName }} || {}
		const response = await fetch('/gorpc/{{ $service.Name }}.{{ $method.Name }}', {
			method: 'POST',
			headers: headers,
			body: JSON.stringify({{ camelize_down $method.InputObject.TypeName }})
		})
		return response.json().then((json) => {
			if (json.error) {
				throw new Error(json.error)
			}
			return json
		})
    }{{ end }}
}{{ end }}
